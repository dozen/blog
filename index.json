[{"content":"\n\ncgiã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¨ã‹æ‡ã‹ã—ããªã„ã§ã™ã‹?\n\n```\n#!/bin/sh\n\nfile=\"count.log\"\nlockfile=\"counter.lock\"\nsleeptime=0\n\nwhile :\ndo\n  #ãƒ­ãƒƒã‚¯\n  mktemp $lockfile 1\u003e /dev/null 2\u003e/dev/null\n  result=$?\n\n  #ãƒ­ãƒƒã‚¯å‡ºæ¥ã¦ãŸã‚‰ã‚«ã‚¦ãƒ³ã‚¿ã‚’é€²ã‚ã‚‹\n  if [ $result -eq 0 ]; then\n    count=$((`cat $file` + 1))\n    echo $count \u003e count.log\n    #ãƒ­ãƒƒã‚¯é–‹æ”¾\n    rm $lockfile\n    break\n  fi\n\n  sleeptime=$(($sleeptime + 1))\n  sleep \"0.00\"$sleeptime\ndone\n\necho $count\n```\n\n`count.log` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã„ã¦ãŠã‘ã°ã‚«ã‚¦ãƒ³ã‚¿ã¨ã—ã¦å‹•ä½œã—ã¾ã™ï¼ãƒ­ãƒƒã‚¯ã«ã¯ `mktemp` ã‚’ä½¿ã„ã¾ã—ãŸãŒ `mkdir` ã¨ã‹ã§ã‚‚ã„ã„ã¯ãšï¼\n\nãƒ­ãƒƒã‚¯ã•ã‚Œã¦ãŸã‚‰ä¸€å®šæ™‚é–“å¾…ã¤ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ãŒï¼Œã¡ã‚‡ã£ã¨æ‰‹æŠœãã™ãã‚‹ã‹ã‚‚ï¼\n","cover":"","link":"2016/08/22.html","preview":"cgiã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¨ã‹æ‡ã‹ã—ããªã„ã§ã™ã‹?","title":"shell scriptã§cgiã‚«ã‚¦ãƒ³ã‚¿ãƒ¼"},{"content":"\n\ndstatã§cpuä½¿ç”¨ç‡, ãƒ¡ãƒ¢ãƒª, ã‚¹ãƒ¯ãƒƒãƒ—, ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯i/o, ãƒ‡ã‚£ã‚¹ã‚¯i/oãªã©ã‚’å–å¾—ã—ã¦fluentdã§elasticsearchã«æŠ•ã’ã¤ã‘ã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™.\n\nãã‚Œã‚’kibanaã§è¦–è¦šåŒ–ã—ã¾ã™. elasticsearch + kibana + fluentd + dstatã®ã‚„ã‚Šæ–¹ã«ã¤ã„ã¦ã¯ä»–ã«ç´¹ä»‹ã—ã¦ã‚‹webã‚µã‚¤ãƒˆãŒãŸãã•ã‚“ã‚ã‚‹ã®ã§å‰²æ„›ã—ã¾ã™.\n\ndstatã ã‹fluentdã®dstatãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä»•æ§˜ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã ã‹ã§, å‚è€ƒã«ã—ãŸwebã‚µã‚¤ãƒˆã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯å‹•ãã¾ã›ã‚“ã§ã—ãŸ. ã¨ã„ã†ã“ã¨ã§ä¿®æ­£ã—ãŸ `fluentd.conf` ã‚’ç´¹ä»‹ã—ã¾ã™.\n\n## fluent.conf\n\n``` text\n\u003csource\u003e\n  type config_expander\n  \u003cconfig\u003e\n    type dstat\n    tag host.dstat.__hostname__\n    option  -tclmsgr -dd sda,sdb --disk-util -nn eth0\n    delay 10\n  \u003c/config\u003e\n\u003c/source\u003e\n\n\u003cmatch host.dstat.**\u003e\n  type copy\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".cpu_usr\", time , \"cpu_usr\" =\u003e record[\"dstat\"][\"total_cpu_usage\"][\"usr\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".cpu_sys\", time , \"cpu_sys\" =\u003e record[\"dstat\"][\"total_cpu_usage\"][\"sys\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".cpu_idl\", time , \"cpu_idl\" =\u003e record[\"dstat\"][\"total_cpu_usage\"][\"idl\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".cpu_wai\", time , \"cpu_wai\" =\u003e record[\"dstat\"][\"total_cpu_usage\"][\"wai\"]]'\n  \u003c/store\u003e\n   \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".cpu_hiq\", time , \"cpu_hiq\" =\u003e record[\"dstat\"][\"total_cpu_usage\"][\"hiq\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".cpu_siq\", time , \"cpu_siq\" =\u003e record[\"dstat\"][\"total_cpu_usage\"][\"siq\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".loadavg_1m\", time , \"loadavg_1m\" =\u003e record[\"dstat\"][\"load_avg\"][\"1m\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".mem_used\", time , \"mem_used\" =\u003e record[\"dstat\"][\"memory_usage\"][\"used\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".mem_buff\", time , \"mem_buff\" =\u003e record[\"dstat\"][\"memory_usage\"][\"buff\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".mem_cache\", time , \"mem_cache\" =\u003e record[\"dstat\"][\"memory_usage\"][\"cach\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".mem_free\", time , \"mem_free\" =\u003e record[\"dstat\"][\"memory_usage\"][\"free\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".io_sda_read\", time , \"io_sda_read\" =\u003e record[\"dstat\"][\"io/sda\"][\"read\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".io_sda_write\", time , \"io_sda_write\" =\u003e record[\"dstat\"][\"io/sda\"][\"writ\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".io_sdb_read\", time , \"io_sdb_read\" =\u003e record[\"dstat\"][\"io/sdb\"][\"read\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".io_sdb_write\", time , \"io_sdb_write\" =\u003e record[\"dstat\"][\"io/sdb\"][\"writ\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".dsk_sda_read\", time , \"dsk_sda_read\" =\u003e record[\"dstat\"][\"dsk/sda\"][\"read\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".dsk_sda_write\", time , \"dsk_sda_write\" =\u003e record[\"dstat\"][\"dsk/sda\"][\"writ\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".dsk_sdb_read\", time , \"dsk_sdb_read\" =\u003e record[\"dstat\"][\"dsk/sdb\"][\"read\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".dsk_sdb_write\", time , \"dsk_sdb_write\" =\u003e record[\"dstat\"][\"dsk/sdb\"][\"writ\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".sda_util\", time , \"sda_util\" =\u003e record[\"dstat\"][\"sda\"][\"util\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".paging_in\", time, \"paging_in\" =\u003e record[\"dstat\"][\"paging\"][\"in\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".paging_out\", time, \"paging_out\" =\u003e record[\"dstat\"][\"paging\"][\"out\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".swap_used\", time, \"swap_used\" =\u003e record[\"dstat\"][\"swap\"][\"used\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".net_eth0_recv\", time , \"net_eth0_recv\" =\u003e record[\"dstat\"][\"net/eth0\"][\"recv\"]]'\n  \u003c/store\u003e\n  \u003cstore\u003e\n    type map\n    map '[\"map.\" + tag + \".net_eth0_send\", time , \"net_eth0_send\" =\u003e record[\"dstat\"][\"net/eth0\"][\"send\"]]'\n  \u003c/store\u003e\n\u003c/match\u003e\n\n\u003cmatch map.host.dstat.**\u003e\n  type record_reformer\n  enable_ruby true\n  tag  timeadd.map.host.dstat\n  \u003crecord\u003e\n    hostname ${tag_parts[3]}\n  \u003c/record\u003e\n\u003c/match\u003e\n\n\u003cmatch timeadd.map.host.dstat.**\u003e\n  type typecast\n  item_types cpu_usr:float,cpu_sys:float,cpu_idl:float,cpu_wai:float,cpu_hiq:float,cpu_siq:float,loadavg_1m:float,mem_used:integer,mem_free:integer,mem_cache:integer,mem_buff:integer,io_sda_read:float,io_sda_write:float,io_sdb_read:float,io_sdb_write:float,dsk_sda_read:float,dsk_sda_write:float,dsk_sdb_read:float,dsk_sdb_write:float,sda_util:float,paging_in:float,paging_out:float,swap_used:integer,net_eth0_recv:float,net_eth0_send:float\n  tag  typecast.timeadd.map.host.dstat\n\u003c/match\u003e\n\n\u003cmatch typecast.timeadd.map.host.dstat.**\u003e\n  type elasticsearch\n  type_name       dstat\n  host            localhost\n  port            9200\n  logstash_format true\n  logstash_prefix logstash\n  flush_interval  10s\n\u003c/match\u003e\n```\n\n## ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰\nè‰¯ã„æ„Ÿã˜ã§ã™ãŒelasticsearchã¨kibanaã¯ã©ã¡ã‚‰ã‚‚ã‚ã¡ã‚ƒãã¡ã‚ƒãƒ¡ãƒ¢ãƒªã‚’é£Ÿã„ã¾ã™. ğŸ˜\n\n![kibana](/images/2016-06/26-kibana_screen_shot.png \"kibana\")\n\n","cover":"","link":"2016/06/26.html","preview":"fluentdã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»–æ‰€ã‹ã‚‰ä¸¸ãƒ‘ã‚¯ãƒªã—ãŸã‚‰å‹•ã‹ãªã‹ã£ãŸ","title":"elasticsearch + kibanaã§ã‚µãƒ¼ãƒã®ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–"},{"content":"\n\nsoftetherã®è»¢é€é‡ã‚’muninã§ã‚°ãƒ©ãƒ•åŒ–ã™ã‚‹\u003ca href=\"https://github.com/dozen/softether-munin\" target=\"_blank\"\u003esoftether-plugin\u003c/a\u003eã‚’ä½œã‚Šã¾ã—ãŸ.\n\nä»Šå›ã¯ `plugin::munin`, `plugin::munin::framework` ã‚’ä½¿ã„ã¾ã—ãŸãŒ, ã“ã‚Œã‚‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ãŸè‡ªä½œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œã‚Šæ–¹ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ã‚‹ã‚µã‚¤ãƒˆãŒå…¨ç„¶è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§, ç´¹ä»‹ã—ã¾ã™.\n\næƒ…å ±å°‘ãªã„ã—ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯munin v2.1ä»¥ä¸Šã˜ã‚ƒãªã„ã¨å‹•ã‹ãªã„ã—, å¾Œè¿°ã™ã‚‹ `negative` ã‚’æŒ‡å®šã—ãŸã‚°ãƒ©ãƒ•ãŒãŸã¾ã«ã†ã¾ãæç”»ã§ããªã‹ã£ãŸã‚Šã¨, ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆæ–¹æ³•ã¨ã—ã¦ã¯çµæ§‹å¾®å¦™ã§ã‚ã‚‹ã“ã¨ã‚’å…ˆã«æ›¸ã„ã¦ãŠãã¾ã™.\n\n## plugin::munin::frameworkã«ã¤ã„ã¦\nsoftether-pluginã¯plugin::munin::frameworkã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒ, ã“ã‚Œã«ã¤ã„ã¦ã®è©³ç´°ã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“.\nã¨ã„ã†ã®ã‚‚, ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ›¸ã„ãŸã®ã¯1å¹´å‰ã§, å½“æ™‚å‚è€ƒã«ã—ã¦ã„ãŸwebã‚µã‚¤ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã‹ã‚‰ã§ã™.\n\nmuninå…¬å¼ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã¨ã«ã‹ãwebä¸Šã«æƒ…å ±ãŒè¼‰ã£ã¦ãªã„ã§ã™.\nmunin 2.1.9-1ã§ã¯å°‘ãªãã¨ã‚‚muninå…¬å¼ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ `munin::plugin` , `munin::plugin::framework` ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™.\nã—ã‹ã— munin 2.0.25 ã§ã¯ãã®ã‚ˆã†ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ä½¿ç”¨ã•ã‚Œã¦ãŠã‚‰ãš, ã¾ãŸãã‚Œã‚‰ã‚’ä½¿ã£ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯å‹•ãã¾ã›ã‚“. cpanã«ã¯ã“ã®2ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ç„¡ã‹ã£ãŸã®ã§, ã“ã‚Œã‚‰ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã„ãŸã„å ´åˆã¯å¯¾å¿œã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®muninã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã—ã‹ãªã•ãã†ã§ã™.\n\nãã‚“ãªã‚ˆãã‚ã‹ã‚‰ãªã„ã‚‚ã®ã‚’ä½¿ã£ã¦å¤§ä¸ˆå¤«ãªã®ã‹ã‚ˆã¨ã„ã†æ„Ÿã˜ã§ã™ãŒ, å‹•ãã—, ç°¡å˜ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒæ›¸ã‘ã‚‹ã£ã½ã„ã®ã§ã‚ˆã—ã¨ã—ã¾ã™.\n\n## è‡ªä½œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§å®Ÿç¾ã—ãŸã„ã“ã¨\nãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è‡ªä½œã™ã‚‹ä¸Šã§å®Ÿç¾ã—ãŸã„ã®ã¯ä»¥ä¸‹ã®3ã¤ã§ã™.\n\n1. softether_myhub ã®ã‚ˆã†ãªã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å¼µã‚‹ã¨myhubã®ã‚°ãƒ©ãƒ•ã‚’ä½œã£ã¦ãã‚Œã‚‹\n1. softetherã®ãƒ›ã‚¹ãƒˆåã¨ã‹hubã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯munin-node.conf.d/munin-nodeã«ã‹ã‘ã‚‹\n1. virtual hubå˜ä½ã§è»¢é€é‡, ãƒ‘ã‚±ãƒƒãƒˆæ•°ã‚’ã‚°ãƒ©ãƒ•åŒ–\n\nã‚°ãƒ©ãƒ•åŒ–ã§ãã‚‹ã“ã¨ã¯ã‚‚ã¡ã‚ã‚“ã§ã™ãŒ, muninã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‰ã—ã, ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã§ç›£è¦–å¯¾è±¡ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’æŒ‡å®šã—ãŸã‚Š, munin-node.conf.d/munin-node ã«æ›¸ã„ãŸconfigãŒèª­ã‚ã‚‹ã‚ˆã†ã«ã—ãŸã„ã§ã™.\n\n## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆ\nsoftether-muninã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦è§£èª¬ã—ã¦ã„ãã¾ã™.\n\n### ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯åã§virtual hubã‚’æŒ‡å®š\nmuninã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚ã‚ŠãŒã¡ãª, å®Ÿä½“ãŒ `if_` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã§ `if_eth0` ã¨ã„ã†ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å¼µã‚‹ã¨eth0ã«ã¤ã„ã¦ã®ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹, ã¨ã„ã†ã®ã‚’çœŸä¼¼ã—ãŸã„.\n\nãƒ—ãƒ©ã‚°ã‚¤ãƒ³ `softether_` ã®ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯åã‚’èª­ã¿å–ã‚‹éƒ¨åˆ†ã¯ã“ã†ãªã‚Šã¾ã™.\n\n``` perl\nmy $hub;\n\nif ($0 =~ /softether_([\\w\\d#-_.\u0026]+)$/) {\n  $hub = $1;\n} else {\n  die (\"can't run config without a symlinked name\");\n}\n```\n\nã“ã‚Œã§ `softether_myhub` ã¨ã„ã†ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’å¼µã‚Œã° `$hub` ã« `myhub` ãŒå…¥ã‚Š, ã‚ã¨ã§å¥½ãã«ä½¿ãˆã¾ã™.\n\n### munin-node.conf.dã«ã‚ã‚‹configã‚’èª­ã¿è¾¼ã‚€\nãƒ›ã‚¹ãƒˆå, ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰, vpncmdã®ãƒ‘ã‚¹ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã‚ã‚‹ã‚ˆã†ã«ã—ã¾ã™.\n\nã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™.\n\n``` perl\nunless (defined $env{host}) {\n  $env{host} = \"localhost\";\n}\n\nunless (defined $env{password}) {\n  die (\"please set password\");\n}\n\nunless (defined $env{vpncmdpath}) {\n  $env{vpncmdpath} = \"/usr/local/vpnserver/vpncmd\";\n}\n```\n\nå¯¾å¿œã™ã‚‹munin-node.conf.dã®è¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™\n\n```\n[softether_*]\nenv.password myvpnpassword\nenv.host localhost\nenv.vpncmdpath /usr/local/vpnserver/vpncmd\n```\n\nãƒ›ã‚¹ãƒˆåã¨vpncmdã®ãƒ‘ã‚¹ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã§æŒ‡å®šã—ã¦ã„ã‚‹ã®ã§, è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯æ›¸ã‹ãªãã¦ã‚‚å‹•ãã¾ã™.\nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã« `env.password` ã¨æ›¸ã„ãŸå ´åˆã¯perlã®å ´åˆã ã¨ `$env{password}` ã¿ãŸã„ãªæ„Ÿã˜ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã¿ãŸã„ã§ã™.\n\n### å€¤ã®å–å¾—ã¨ã‹, æç”»ã—ãŸã„ã‚°ãƒ©ãƒ•ã®è¨­å®š\n\n``` perl\nmy @item_key = (\n\"outgoing unicast packets\",\n\"outgoing unicast total size\",\n\"outgoing broadcast packets\",\n\"outgoing broadcast total size\",\n\"incoming unicast packets\",\n\"incoming unicast total size\",\n\"incoming broadcast packets\",\n\"incoming broadcast total size\",\n);\n\nmy $result = `$env{vpncmdpath} $env{host} /server /password:$env{password} /hub:$hub /cmd statusget`;\n\nmy %data;\n\nsub get_value {\n  my $tmp;\n  my $key = shift;\n  if ($result =~ /$key\\s*\\|([0-9,]+)/) {\n    $tmp = $1;\n    $tmp =~ s/,//g;\n    return $tmp;\n  }\n}\n\nfor my $item (@item_key) {\n  $data{$item} = get_value($item);\n}\n```\n\nã“ã‚“ãªæ„Ÿã˜ã§ã™.  `$result` ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªçµæœãŒå…¥ã‚‹ã®ã§, æ¬²ã—ã„å€¤ã‚’ `@item_key` ã«ç™»éŒ²ã—ã¦ãŠã„ã¦å–ã£ã¦æ¥ã¦ã„ã¾ã™\n\n```\nstatusget\nvpncmd command - softether vpn command line management utility\nsoftether vpn command line management utility (vpncmd command)\nversion 4.19 build 9605   (english)\ncompiled 2016/03/06 21:09:57 by yagi at pc30\ncopyright (c) softether vpn project. all rights reserved.\n\nconnection has been established with vpn server \"localhost\" (port 443).\n\nyou have administrator privileges for virtual hub 'vpn' on the vpn server.\n\nvpn server/vpn\u003estatusget\nstatusget command - get current status of virtual hub\nitem                         |value\n-----------------------------+---------------------\nvirtual hub name             |vpn\nstatus                       |online\ntype                         |standalone\nsecurenat                    |enabled\nsessions                     |2\nsessions (client)            |1\nsessions (bridge)            |0\naccess lists                 |0\nusers                        |1\ngroups                       |0\nmac tables                   |3\nip tables                    |3\nnum logins                   |54\nlast login                   |2016-06-25 19:12:43\nlast communication           |2016-06-25 21:22:15\ncreated at                   |2016-04-04 00:12:46\noutgoing unicast packets     |157,138,736 packets\noutgoing unicast total size  |133,078,817,603 bytes\noutgoing broadcast packets   |477,735 packets\noutgoing broadcast total size|31,355,040 bytes\nincoming unicast packets     |157,166,519 packets\nincoming unicast total size  |133,081,898,141 bytes\nincoming broadcast packets   |2,833,614 packets\nincoming broadcast total size|174,223,220 bytes\nthe command completed successfully.\n```\n\n### munin::plugin::framework ã§ã‚°ãƒ©ãƒ•ä½œæˆ\nmuninã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯å¼•æ•°ã«confã‚’æ¸¡ã—ãŸæ™‚ã¯ã‚°ãƒ©ãƒ•ã®è¨­å®šã‚’åã‹ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã‚Šã¨ã‹è‰²ã€…ã‚ã‚‹ã‚“ã§ã™ãŒ, ãã®ã¸ã‚“ã‚’ã‚ˆã—ãªã«ã‚„ã£ã¦ãã‚Œã‚‹ã®ãŒ `munin::plugin::framework` ã§ã™. ã ã¨æ€ã„ã¾ã™.\n\nã“ã‚Œã‚’ä½¿ãˆã°è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚µã‚¯ã‚µã‚¯ã£ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã‚Œã¾ã™.\n\n``` perl\nmy $plugin = munin::plugin::framework-\u003enew;\n\n$plugin-\u003eadd_graphs(\n  packets =\u003e {\n    args =\u003e \"\",\n    category =\u003e $category,\n    info =\u003e \"$hub packets\",\n    title =\u003e \"$hub packets\",\n    vlabel =\u003e \"in (-) | out (+) packets / second\",\n    fields =\u003e {\n      unicast_out =\u003e {\n        label =\u003e \"unicast\",\n\ttype =\u003e \"derive\",\n\tmin =\u003e 0,\n\tnegative =\u003e \"unicast_in\",\n\tvalue =\u003e $data{\"outgoing unicast packets\"}\n      },\n      unicast_in =\u003e {\n        type =\u003e \"derive\",\n\tmin =\u003e 0,\n\tvalue =\u003e  $data{\"incoming unicast packets\"}\n      }\n    }\n  },\n  unicast_total_packets =\u003e {\n    args =\u003e \"\",\n    category =\u003e $category,\n    info =\u003e \"$hub unicast toatl packets\",\n    title =\u003e \"$hub unicast total packets\",\n    vlabel =\u003e \"packets\",\n    fields =\u003e {\n      incoming =\u003e {\n        label =\u003e \"incoming\",\n        type =\u003e \"gauge\",\n        min =\u003e 0,\n        value =\u003e $data{\"incoming unicast packets\"}\n      },\n      outgoing =\u003e {\n        label =\u003e \"outgoing\",\n        type =\u003e \"gauge\",\n        draw =\u003e \"area\",\n        min =\u003e 0,\n        value =\u003e $data{\"outgoing unicast packets\"}\n      }\n    }\n  }\n);\n\n$plugin-\u003erun();\n```\n\nã“ã‚“ãªæ„Ÿã˜ã§ `add_graphs()` ã§ã©ã‚“ã©ã‚“è¿½åŠ ã—ã¦ã„ãã ã‘.\nã‚«ãƒ†ã‚´ãƒªã¯ `softether` ã¨ã‹ã«ã—ã¦ã¾ã™.\n\n- args: ã‚°ãƒ©ãƒ•ã®ä¸‹é™å€¤, ä¸Šé™å€¤, å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«ã§ãƒ—ãƒ­ãƒƒãƒˆ ãªã©ã‚’æŒ‡å®šã™ã‚‹ã¨ã“ã‚\n- category: [ disk munin network processes system time ]ã¿ãŸã„ãªã®, ã‚ã‚Œã§ã™. ã™ã§ã«ã‚ã‚‹ã‚‚ã®ã«è¿½åŠ ã—ãŸã‚Šã¨ã‹, `softether` ã¿ãŸã„ã«æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã‚’ä½œã‚‹ã“ã¨ã‚‚å‡ºæ¥ã¾ã™\n- vlabel: ã‚°ãƒ©ãƒ•ã®ç¸¦è»¸ã®è¡¨ç¤ºå.\n- fields: æç”»ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦è¨˜è¿°ã™ã‚‹\n  - type: `derive` ã ã¨å‰ã®å€¤ã¨ã®å·®, `gauge` ã ã¨å€¤ã‚’ãã®ã¾ã¾å‡ºåŠ›\n  - negative: nicã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã¨ã‹ã®ã‚°ãƒ©ãƒ•ã§outãŒä¸Šæ–¹å‘, inãŒä¸‹æ–¹å‘ã«ã‚°ãƒ©ãƒ•ãŒä¼¸ã³ã¦ã¾ã™ãŒ, ã‚ã‚Œã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã™. `negative` ã«æŒ‡å®šã—ãŸã‚­ãƒ¼ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãƒã‚¤ãƒŠã‚¹æ–¹å‘ã«æç”»ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™.\n\nã ã„ãŸã„ã“ã‚“ãªæ„Ÿã˜ãªã‚“ã§ã™ãŒ, `munin::plugin::framework` ã§ `negative` ã‚’æŒ‡å®šã™ã‚‹ã¨ãŸã¾ãƒ¼ã«ã‚°ãƒ©ãƒ•ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã™.\nrrdtoolãŒã‚¨ãƒ©ãƒ¼ã‚’åã„ã¦ã¾ã™ãŒ, åŸå› ã¯ã‚ˆãã‚ã‹ã‚Šã¾ã›ã‚“. ã“ã®è¾ºã¯ã¡ã‚‡ã£ã¨å¾®å¦™ãªæ„Ÿã˜ã§ã™ã­.\n`negative` ã‚’ä½¿ã‚ãªã‘ã‚Œã°ã„ã„ã‚“ã§ã™ãŒsoftetherãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚°ãƒ©ãƒ•åŒ–ã—ãŸã„ã‚‚ã®ã¯ãŠãŠã‹ãŸin/outãŒã‚ã‚‹ã®ã§outã‚’ä¸Šæ–¹å‘, inã‚’ä¸‹æ–¹å‘ã«ä¼¸ã°ã™ã‚°ãƒ©ãƒ•ã®ã»ã†ãŒã—ã£ãã‚Šæ¥ã¾ã™ã—.\n\n### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å…¨ä½“å›³, ç”Ÿæˆã•ã‚Œã‚‹ã‚°ãƒ©ãƒ•\n\u003ca href=\"https://github.com/dozen/softether-munin\" target=\"_blank\"\u003egithub\u003c/a\u003eã‚’è¦‹ã¦ãã ã•ã„. ğŸ˜\n","cover":"","link":"2016/06/25.html","preview":"plugin::munin, plugin::munin::frameworkã‚’ä½¿ã£ã¦munin pluginã‚’è‡ªä½œã™ã‚‹","title":"munin pluginã®ä½œæˆ"},{"content":"\n\n## inkpaperã®ä½¿ã„æ–¹\n[inkpaperã®readme](https://github.com/inkproject/ink#introduce)ã‚’èª­ã‚ã°ã ã„ãŸã„åˆ†ã‹ã‚‹.\n\n### inkpaperã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n[http://www.inkpaper.io/](http://www.inkpaper.io/)ã‹ã‚‰è‡ªåˆ†ã®ç’°å¢ƒã«åˆã£ãŸã‚‚ã®ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™. zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£å‡ã™ã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã§ã™.\n\n### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹\n`blog/config.yml`ã‚’ç·¨é›†ã—ã¾ã™.\n\n```\nsite:\n    title: ã‚¸ã‚§ãƒƒãƒˆãƒ»ã‚¾ã‚¦ #ãƒ–ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒˆãƒ«\n    subtitle: ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ« #ã‚¿ã‚¤ãƒˆãƒ«ã®ä¸‹ã«ãƒãƒ§ãƒ­ãƒ³ã¨è¡¨ç¤ºã•ã‚Œã¾ã™\n    # logo: /images/avatar.jpg #ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã‚Œã‚‹è‡ªåˆ†ã®ã‚¢ã‚¤ã‚³ãƒ³\n    limit: 10 \n    theme: theme\n    disqus: somebody\n    lang: en\n    url: http://jetzou.com/\n    # root: /blog\n\nauthors:\n    me:\n        name: dozen\n        intro: ã©ãœã‚“ã¨èª­ã¿ã¾ã™\n        avatar: /images/avatar.jpg\n\nbuild:\n    port: 8000\n    # copied files to public folder when build\n    copy:\n        - theme/bundle\n        - theme/favicon.ico\n        - theme/robots.txt\n        - source/images\n    # excuted command when use 'ink publish'\n    publish: |\n        git add . -a\n        git commit -m \"update\"\n        git push origin\n```\n\n`url`ã¨`root`ã ã‘æ°—ã‚’ã¤ã‘ã‚Œã°ã‚ã¨ã¯é©å½“ã§å¤§ä¸ˆå¤«. ä»Šå›ã¯`http://jetzou.com/`ã§å…¬é–‹ã—ãŸã„ã®ã§`url: http://jetzou.com/\"`ã¨ã—ã¾ã—ãŸ. `disqus`ã¯ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã‚‹disqusã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹ã‚“ã§ã™ãŒ, ä»Šå›ã¯ã‚¹ã‚­ãƒƒãƒ—.\n\n`lang`ã¯ä»Šã®ã¨ã“ã‚ä¸­å›½èªã¨è‹±èªã«ã—ã‹å¯¾å¿œã—ã¦ã„ãªã„ã¿ãŸã„ãªã®ã§, `en`ã‚’æŒ‡å®šã—ã¾ã—ãŸ.\n\nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã‚“ãªæ„Ÿã˜ã§å¤§ä¸ˆå¤«ãã†ã§ã™.\n\n### è¨˜äº‹ã‚’æ›¸ã\nè¨˜äº‹ã‚’ç½®ãå ´æ‰€ã¯`blog/source`ã§ã™.\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸçŠ¶æ…‹ã§ã¯ã‚µãƒ³ãƒ—ãƒ«ãƒšãƒ¼ã‚¸ã®`blog/source/ink-blog-tool-en.md`ã¨`blog/source/ink-blog-tool.md`ãŒã‚ã‚Šã¾ã™. è¨˜äº‹ã‚’æ›¸ãã¾ãˆã«ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¿ã¦, å‚è€ƒã«ã™ã‚‹ã¨ã„ã„ã§ã™. å…¬é–‹ã™ã‚‹å‰ã«ã“ã®2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ¶ˆã—ã¦ãŠãã¾ã™.\n\n```\ntitle: article title\ndate: year-month-day hour:minute:second #created timeï¼Œsupport timezone, such as \" +0800\"\nupdate: year-month-day hour:minute:second #updated timeï¼Œoptionalï¼Œsupport timezone, such as \" +0800\"\nauthor: authorid\ncover: article cover path #optional\ndraft: false #if draftï¼Œoptional\ntop: false #place article to top, optional\npreview: article previewï¼Œalso use \u003c!--more--\u003e to split in body #optional\ntags: #optional\n    - tag1\n    - tag2\n\n---\n\nmarkdown format's body\n```\n\n`date`ã¯æŠ•ç¨¿æ—¥æ™‚, `update`ã¯æ›´æ–°æ—¥æ™‚ã§ã™. `update`ã¯ä¸è¦ã§ã™ãŒ`date`ã¯å¿…é ˆã§ã™. ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãªã©ã‚’ç”Ÿæˆã™ã‚‹éš›ã«`date`ã‚’ã‚‚ã¨ã«è¨˜äº‹ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã§ã™. ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯`2016-06-01 12:00:00`ã¿ãŸã„ãªæ„Ÿã˜ã§ã™. ã¡ã‚ƒã‚“ã¨ç§’ã¾ã§æŒ‡å®šã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™.\n\n`author`ã¯`blog/config.yml`ã§æŒ‡å®šã—ãŸ`authors`ã‚’æŒ‡å®šã—ã¾ã™. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨`me`ã§ã™. \n\n`cover`ã¯ã‚ˆãã‚ã‹ã‚“ãªã„ã§ã™. ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã‹ãª?\n\n`draft: true`ã‚’è¿½åŠ ã™ã‚‹ã¨æ›¸ãã‹ã‘ã®è¨˜äº‹ã¨ã¿ãªã•ã‚Œã¦, ãƒšãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¾ã›ã‚“.\n\n`top: true`ã¨ã™ã‚‹ã¨, ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ä¸€ç•ªä¸Šã«å¼µã‚Šä»˜ãè¨˜äº‹ã«ãªã‚‹ã¿ãŸã„ã§ã™. ä½¿ã£ãŸã“ã¨ç„¡ã„ã‹ã‚‰ã‚ã‹ã‚‰ãªã„ã‘ã©.\n\n`preview`ã¯ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã§è¡¨ç¤ºã•ã‚Œã‚‹è¨˜äº‹ã®æ¦‚è¦ã‚’æŒ‡å®šã—ã¾ã™. ã“ã‚Œã‚’æŒ‡å®šã›ãšã«, è¨˜äº‹ã®æœ¬ä½“ã®é©å½“ãªå ´æ‰€ã«`\u003c!--more--\u003e`ã‚’ç½®ãã¨ãã®éƒ¨åˆ†ã¾ã§ã‚’è¨˜äº‹ã®æ¦‚è¦ã¨ã—ã¦è¡¨ç¤ºã—ã¦ãã‚Œã¾ã™. ãŸã ã—, markdownã‚’å‡¦ç†ã—ã¦ãã‚Œãªã„ã®ã§`\u003c!--more--\u003e`ã¯ä½¿ã‚ãšã«, `preview`ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™.\n\n`tags`ã§`pc`ã¨ã‹`é£Ÿã¹ç‰©`ã¨ã‹æŒ‡å®šã—ã¦ã‚ã’ã‚‹ã¨ã‚¿ã‚°ã”ã¨ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒšãƒ¼ã‚¸ã¨ã‹ä½œã£ã¦ãã‚Œã¾ã™.\n\nä»¥ä¸ŠãŒè¨˜äº‹ã®æƒ…å ±ã§ã™. `---`ã‚ˆã‚Šä¸‹ãŒæœ¬æ–‡ã¨ãªã‚Šã¾ã™. ã“ã“ã‹ã‚‰ä¸‹ã¯markdownè¨˜æ³•ãŒä½¿ãˆã¾ã™.\n\nã“ã‚Œã‚’è¸ã¾ãˆã‚‹ã¨ä¸€ç•ªç°¡å˜ãªæ›¸å¼ã¯ã“ã†ãªã‚Šã¾ã™.\n\n```\ntitle: ã‚¿ã‚¤ãƒˆãƒ«\ndate: 2016-06-05 7:00:00\npreview: ãƒ†ã‚¹ãƒˆã§ã™\n\n---\n\nãƒ†ã‚¹ãƒˆ\n```\n\nã“ã‚Œã‚’`blog/source`ã®ä¸‹ã«ç½®ã„ã¦, ãƒ•ã‚¡ã‚¤ãƒ«åã‚’`ã‚¿ã‚¤ãƒˆãƒ«.md`ãªã©ã¨ã—ã¦ä¿å­˜ã—ã¦ã‚‚ã„ã„ã®ã§ã™ãŒ, ãã‚Œã ã¨ä»Šå¾Œè¨˜äº‹ãŒå¢—ãˆãŸæ™‚ã«ã²ã£ã¡ã‚ƒã‹ã‚ã£ã¡ã‚ƒã‹ã«ãªã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™.\n\nãã“ã§, `blog/source/å¹´/æœˆ/æ—¥`ã¨ã„ã†ãµã†ã«ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™. ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã£ã¦ã‚‚è¨˜äº‹ã®uriã«ã¯ä½•ã®å½±éŸ¿ã‚‚å‡ºãªã„ã®ã§, å¥½ããªã‚ˆã†ã«å¤‰æ›´ã§ãã¾ã™. ç§ã¯ä»Šã®ã¨ã“ã‚`blog/source/å¹´/æœˆ`ãã‚‰ã„ã«ã—ã¦ã¾ã™.\n\n### ã¡ã‚ƒã‚“ã¨ç”Ÿæˆã•ã‚Œã¦ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹\nè¨˜äº‹ã‚’æ›¸ã„ãŸã‚‰, ã¡ã‚ƒã‚“ã¨ãƒšãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™. `./ink preview`ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§, ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ã¦ç°¡æ˜“çš„ãªã‚µãƒ¼ãƒãŒèµ·å‹•ã—ã¾ã™. `http://localhost:8000`ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™. ãƒãƒ¼ãƒˆç•ªå·ãŒ8000ã ã¨éƒ½åˆãŒã‚ã‚‹ã„å ´åˆã¯`blog/config.yml`ã§å¤‰æ›´ã—ã¾ã™.\n\n### ãƒ†ãƒ¼ãƒã‚’ä¿®æ­£ã™ã‚‹\nãƒ–ãƒ­ã‚°ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã¨, ã‚ã‚‹ã“ã¨ã«æ°—ã¥ãã¾ã™. æŠ•ç¨¿ã—ãŸæ™‚åˆ»ãŒãŠã‹ã—ã„ã‚“ã§ã™. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§è‹±èªã‚’æŒ‡å®šã—ãŸã¯ãšãªã®ã«,`åˆ†é’Ÿå‰`ã¨ã‹è¡¨ç¤ºã•ã‚Œã¾ã™. ã©ã†ã‚‚ã“ã®æŠ•ç¨¿æ™‚åˆ»ã®è¡¨ç¤ºã¯javascriptã§è¡Œã‚ã‚Œã¦ãŠã‚Š, ã“ã“ã ã‘è¨€èªã®è¨­å®šãŒåæ˜ ã•ã‚Œãªã„ã¿ãŸã„ã§ã™.\n\n#### ã¾ã˜ã‚ã«ç›´ã™\nãƒ†ãƒ¼ãƒã¯`blog/theme`ã«ã‚ã‚Š, ç·¨é›†ã™ã¹ããƒ•ã‚¡ã‚¤ãƒ«ã¯`blog/theme/source/index.coffee`ã§ã™.\n\n```\ntimesince = (date) -\u003e\n\n    seconds = math.floor((new date() - date) / 1000)\n    interval = math.floor(seconds / 31536000)\n    if interval \u003e 1\n        return interval + \"å¹´å‰\"\n    interval = math.floor(seconds / 2592000)\n    if interval \u003e 1\n        return interval + \"ä¸ªæœˆå‰\"\n    interval = math.floor(seconds / 86400)\n    if interval \u003e 1\n        return interval + \"å¤©å‰\"\n    interval = math.floor(seconds / 3600)\n    if interval \u003e 1\n        return interval + \"å°æ—¶å‰\"\n    interval = math.floor(seconds / 60)\n    if interval \u003e 1\n        return interval + \"åˆ†é’Ÿå‰\"\n    return math.floor(seconds) + \"ç§’å‰\"\n```\n\nã“ã‚“ãªè¨˜è¿°ãŒã‚ã‚‹ã®ã§, ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™.\n\n```\ntimesince = (date) -\u003e\n\n    seconds = math.floor((new date() - date) / 1000)\n    interval = math.floor(seconds / 31536000)\n    if interval \u003e 1\n        return interval + \"å¹´å‰\"\n    interval = math.floor(seconds / 2592000)\n    if interval \u003e 1\n        return interval + \"ãƒ¶æœˆå‰\"\n    interval = math.floor(seconds / 86400)\n    if interval \u003e 1\n        return interval + \"æ—¥å‰\"\n    interval = math.floor(seconds / 3600)\n    if interval \u003e 1\n        return interval + \"æ™‚é–“å‰\"\n    interval = math.floor(seconds / 60)\n    if interval \u003e 1\n        return interval + \"åˆ†å‰\"\n    return math.floor(seconds) + \"ç§’å‰\"\n```\n\nç·¨é›†ãŒçµ‚ã‚ã£ãŸã‚‰, webpackã‚’å®Ÿè¡Œã—ã¾ã™.\n\n`blog/theme`ã«ç§»å‹•ã—ã¦, ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™.\n\n```\nnpm install\n\n./node_modules/webpack/bin/webpack.js\n```\n\næ¬¡ã«`ink`ã¨ã‹`blog`ãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æˆ»ã£ã¦, `./ink preview`ã‚’å®Ÿè¡Œã—ã¦ç¢ºèªã—ã¦ãã ã•ã„. `10åˆ†å‰`ã¿ãŸã„ãªã‹ã‚“ã˜ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã™.\n\n#### é©å½“ã«ç›´ã™\nnodeã¨ã‹å…¥ã‚Œã¦ãªã„ã—jsãƒ•ã‚¡ã‚¤ãƒ«ç›´æ¥ç·¨é›†ã™ã‚‹ã ã‘ã§ã„ã„ã§ã—ã‚‡, ã£ã¦è¨€ã†æ–¹ã¯ã“ã£ã¡ã§.\n\n`blog/theme/bundle/index.js`ã®1è¡Œç›®ã«, `ä¸ªæœˆå‰`ã¨ã‹`å¤©å‰`ã¨ã‹æ›¸ã„ã¦ã‚ã‚‹éƒ¨åˆ†ãŒã‚ã‚‹ã¯ãšãªã®ã§, ä¿®æ­£ã—ã¾ã™.\n\n`./ink preview` ã§å¤‰æ›´ãŒåæ˜ ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™.\n\n### ã‚³ãƒãƒ³ãƒ‰ã¾ã¨ã‚\nè¨˜äº‹ã‚’æ›¸ã„ãŸã‚‰`./ink preview`ã§ç¢ºèªã—ã¦, `./ink publish`ã§githubã«ãƒ—ãƒƒã‚·ãƒ¥, ã¨ã„ã†æµã‚Œã«ãªã‚Šã¾ã™. `./ink build`ã¯ãƒ†ãƒ¼ãƒã‹ã‚‰cssã‚„jsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ãŒ, `preview`ã‚„`publish`ã®ã¨ãã«ã“ã®ã‚³ãƒãƒ³ãƒ‰ãŒèµ°ã£ã¦ã„ã‚‹ã¿ãŸã„ãªã®ã§è‡ªåˆ†ã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒãªã, ä½™ã‚Šä½¿ã„ã¾ã›ã‚“\n\n\n## github pagesã®ä½¿ã„æ–¹\n[https://help.github.com/categories/github-pages-basics/](https://help.github.com/categories/github-pages-basics/)ã‚’èª­ã‚ã°ã ã„ãŸã„åˆ†ã‹ã‚‹.\n\n### ãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆã¨cnameã®è¨­å®š\ngithubã§`blog`ã¨ã‹é©å½“ãªåå‰ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚Šã¾ã™. ãã†ã—ãŸã‚‰, `blog`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦å…ˆã»ã©ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¾ã™. æ¬¡ã«`blog/public`ã‚’å‰Šé™¤ã—, cloneã—ãŸãƒªãƒã‚¸ãƒˆãƒªã®ã‚’`public`ã«ãƒªãƒãƒ¼ãƒ ã—ã¾ã™. ãƒªãƒãƒ¼ãƒ ã—ãŸã‚‰`git checkout -b gh-pages`ã‚’å®Ÿè¡Œã—ã¾ã™.\n\n`blog/public/cname`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—, ä½¿ç”¨ã™ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã®1è¡Œç›®ã«æ›¸ãè¾¼ã¿ã¾ã™. `jetzou.com`ã¨ã‹, `blog.jetzou.com`ã¿ãŸã„ãªæ„Ÿã˜ã§ã™. æ›¸ãè¾¼ã‚“ã ã‚‰, `git add cname`, `git commit -m \"add cname\"`ã¨ã„ã†ãµã†ã«cnameãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—,ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„. \n\nã‚³ãƒŸãƒƒãƒˆã—ãŸã‚‰, `git push --set-upstream origin gh-pages` ã‚’å®Ÿè¡Œã—ã¦ãŠãã¾ã™.\n\ncustom domainã‚’ä½¿ã‚ãšã«`dozen.github.io/blog`ã¿ãŸã„ãªæ„Ÿã˜ã§ä½¿ã†äººã¯`cname`ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šã¯ä¸è¦ã§ã™.\n\n### dnsã®è¨­å®š\ncustom domainä½¿ã†äººã ã‘ãŒå¿…è¦ãªè¨­å®šã§ã™. [https://help.github.com/articles/setting-up-an-apex-domain/\u003cpaste\u003e](https://help.github.com/articles/setting-up-an-apex-domain/)ã“ã“ã‚’å‚è€ƒã«ã—ã¾ã™.\n\nå‚è€ƒã«ã™ã‚‹ãƒšãƒ¼ã‚¸ã«ã‚‚æ›¸ã„ã¦ã‚ã‚Šã¾ã™ãŒ, cnameãƒ¬ã‚³ãƒ¼ãƒ‰ã¯ä½¿ã‚ãªã„ã‚ˆã†ã«ã—ã¾ã™. ã§, ä»Šå›ã¯alias, anameãƒ¬ã‚³ãƒ¼ãƒ‰éå¯¾å¿œã®dnsã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚, aãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ãŸè¨­å®šã‚’ã—ã¾ã™.\n\ndnsã«`192.30.252.153`ã¨`192.30.252.154`ã®aãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚Œã°ã„ã„ã£ã½ã„ã®ã§, è¿½åŠ ã—ã¾ã™.\n\n### inkpaperã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã™ã‚‹\n`blog/config.yml`ã®`utl`ã‚’å¤‰æ›´ã—ã¾ã™. å¿…è¦ãªå ´åˆã¯`root`ã‚’ã‚¢ãƒ³ã‚³ãƒ¡ãƒ³ãƒˆã—ã¾ã™.\n\n### è¨˜äº‹ã‚’github pagesã«åæ˜ \nã“ã“ã¾ã§ã®è¨­å®šã‚’çµ‚ãˆã¦, è¨˜äº‹ã‚’æ›¸ã„ãŸã‚‰`./ink publish`ã‚’å®Ÿè¡Œã—ã¾ã™. ã“ã‚Œã§, github pagesä¸Šã®ãƒ–ãƒ­ã‚°ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã™\n\n---\n\ninkpaperã¨github pagesã®ä½¿ã„æ–¹ã¯ã–ã£ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™.\n\ninkpaperã«é–¢ã™ã‚‹æ—¥æœ¬èªã®è¨˜äº‹ãŒã‚ã‚“ã¾ã‚Šãªã„ã®ãŒæ‚²ã—ã„ã§ã™. æ—¥æœ¬ã§ä½¿ã£ã¦ã‚‹äººãŒå¢—ãˆãŸã‚‰ã„ã„ãª. ğŸ˜\n","cover":"","link":"2016/06/05.html","preview":"inkppaerã§ãƒ–ãƒ­ã‚°ã‚’ç”Ÿæˆã—ã¦, github pagesã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¾ã§","title":"inkpaperã¨github pagesã®ä½¿ã„æ–¹"},{"content":"\n\n## ãƒ–ãƒ­ã‚°ã‚’é™çš„ã‚µã‚¤ãƒˆã«ã™ã‚‹ã‚ã‘\nãƒ–ãƒ­ã‚°ã‚’ã‚„ã£ã¦ã„ã¦, ã‚µã‚¤ãƒˆã«å¤‰æ›´ãŒå¿…è¦ãªã‚·ãƒ¼ãƒ³ã¯ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™.\n\n- æ–°ã—ã„è¨˜äº‹ã‚’æ›¸ã„ãŸæ™‚\n- ã‚³ãƒ¡ãƒ³ãƒˆãŒã¤ã„ãŸæ™‚\n- ãƒˆãƒ©ãƒƒã‚¯ãƒãƒƒã‚¯ãŒã‚ã£ãŸæ™‚\n\nãŸã£ãŸã“ã‚Œã ã‘. ã—ã‹ã‚‚, ã‚³ãƒ¡ãƒ³ãƒˆã¯snsã§ä»£ç”¨ã§ãã‚‹ã—, ãƒˆãƒ©ãƒƒã‚¯ãƒãƒƒã‚¯ã¯å»ƒã‚Œã¦ã‚‹ã‹ã‚‰ä¸è¦ã§ã™. ã¨ãªã‚‹ã¨, ã‚µã‚¤ãƒˆã«å¤‰æ›´ãŒåŠ ã‚ã‚‹ã®ã¯æ–°ã—ã„è¨˜äº‹ã‚’æ›¸ã„ãŸæ™‚ã ã‘ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™. é™çš„ã‚µã‚¤ãƒˆã§ååˆ†ã§ã™ã‚ˆã­.\n\nå®Ÿéš›ã«twitterã¨ã‹facebookãŒæ™®åŠã—ãŸé ƒã«wordpressã‹ã‚‰é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã«ç§»è¡Œã—ã¾ã—ãŸã£ã¦ã„ã†ã®ãŒæµè¡Œã£ã¦ã¾ã—ãŸ.\n\né™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã¨ã‹é™çš„ãƒ–ãƒ­ã‚°ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã®é¡ãŒ, ä»Šå›ã®inkpaperã«ã‚ãŸã‚Šã¾ã™.\n\n## [inkpaper](https://github.com/inkproject/ink)ã¨ã¯\ngoè¨€èªã§æ›¸ã‹ã‚ŒãŸé™çš„ãƒ–ãƒ­ã‚°ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§ã™. ä»Šå›ã¯ã“ã‚Œã‚’ä½¿ã„ã¾ã—ãŸ.\n\nãƒ–ãƒ­ã‚°ã£ã¦é™çš„ã‚µã‚¤ãƒˆã§ååˆ†ã ã‚ˆã­, ã¨ã¯è¨€ã„ã¤ã¤ã‚‚æ–°ã—ã„è¨˜äº‹ã‚’æ›¸ã„ãŸæ™‚ã«æ›´æ–°ãŒå¿…è¦ã«ãªã‚‹ãƒšãƒ¼ã‚¸ã¯çµæ§‹ãŸãã•ã‚“ã‚ã‚Šã¾ã™. ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸, ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã®ãƒšãƒ¼ã‚¸, ã‚«ãƒ†ã‚´ãƒªã®ãƒšãƒ¼ã‚¸ãªã©â€¦ ã“ã‚Œã‚‰ã‚’æ‰‹ä½œæ¥­ã§ã™ã‚‹ã®ã¯é¢å€’ã™ãã¾ã™. ãã†ã„ã†æ™‚ã«é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãŒå¿…è¦ã§ã™.\n\ninkpaperã‚’é¸ã‚“ã ã®ã¯å˜ç´”ã«goè¨€èªã§æ›¸ã‹ã‚Œã¦ã‚‹ã‹ã‚‰ã£ã¦ã„ã†ç†ç”±ã ã‘ã§ã™. ãŸã¾ãŸã¾ä»Šgoã‚’è§¦ã£ã¦ã„ã‚‹ã®ã§.\nãã‚Œã¨markdownã§è¨˜äº‹ã‚’ã‹ã‘ã‚‹ã®ãŒè‰¯ã„æ„Ÿã˜ã§ã™.\n\n## ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°\nè‡ªé¯–ã‚„vpsã§ãƒ–ãƒ­ã‚°ã‚’ã‚„ã£ã¦ãŸé ƒãŒã‚ã‚‹ã‚“ã§ã™ãŒ, ãƒ–ãƒ­ã‚°ã®å¼•è¶Šã¯çµæ§‹é¢å€’ãã•ã„ã‚“ã§ã™ã‚ˆã­ãƒ¼. ãã‚ŒãŒã ã‚‹ãã¦ä»Šã¾ã§ãƒ–ãƒ­ã‚°ã‚’ç«‹ã¦ã‚‹ãŸã³ã«å‰ã®ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãŒå¤±ã‚ã‚Œã¦ã„ã¾ã—ãŸ.\n\nãã†ã„ã†ã®ã‚’é˜²ããŸã‚ã«, ä»Šå›ã¯[github pages](https://pages.github.com/)ã‚’ä½¿ã„ã¾ã—ãŸ. ã‚µãƒ¼ãƒã®ç®¡ç†ã¨ã‹ç„¡ã„ã®ã§, ãƒ–ãƒ­ã‚°ãŒå¤±ã‚ã‚Œã‚‹ã“ã¨ã¯ç„¡ã„ã¨æ€ã„ã¾ã™.\n\n## inkpaperã¨github pagesã‚’ä½¿ã£ã¦ã¿ãŸæ„Ÿæƒ³\n\næ‚ªãç„¡ã„ã¨æ€ã„ã¾ã™ãŒ, æ°—ã«ãªã‚‹ã“ã¨ãŒå°‘ãªããªã„ã§ã™.\n\ninkpaperã¯ã¡ã‚‡ã£ã¨ã‚·ãƒ³ãƒ—ãƒ«ã™ãã‚‹ã‹ã‚‚. analyticsã‚’ä»•è¾¼ã‚€æ©Ÿèƒ½ãŒç„¡ã„ã®ã§, è‡ªåˆ†ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ•ãƒƒã‚¿ãƒ¼ã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’åŠ ãˆãªã„ã¨ã„ã‘ã¾ã›ã‚“ã§ã—ãŸ.\n\nã‚ã¨uriã®æ§‹é€ ã‚’è‡ªåˆ†å¥½ã¿ã«å¤‰æ›´ã§ããªã„. ãƒ‘ãƒ¼ãƒãƒªãƒ³ã‚¯ã®è¨­å®šã¨ã‹ç„¡ã„ã®ã§, uriã¯ `å¹´/æœˆ/æ—¥/è¨˜äº‹ã®ãƒ•ã‚¡ã‚¤ãƒ«å.html` ã¨ãªã‚Šã¾ã™.\n\n# ã¾ã¨ã‚\ninkpaperã¨github pagesã‚’ä½¿ã£ã¦ãƒ–ãƒ­ã‚°ã‚’ç«‹ã¦ãŸã“ã¨ã‚’ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã«ã—ã¦ã¿ãŸã‚“ã§ã™ãŒ, æ¡ˆå¤–æ°—ã«ãªã‚‹ç‚¹ãŒå¤šã‹ã£ãŸã§ã™. ã“ã‚Œé•·ç¶šãã—ãªã„ã‹ã‚‚ã—ã‚Œãªã„ãªã‚â€¦ ğŸ˜\n","cover":"","link":"2016/06/03.html","preview":"goè¨€èªè£½ã®é™çš„ãƒ–ãƒ­ã‚°ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿, inkpaperã‚’ä½¿ã„ã¾ã™","title":"github pagesã¨inkpaperã§ãƒ–ãƒ­ã‚°ã‚’å§‹ã‚ã‚‹"}]